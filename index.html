<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="å­ä¾›å‘ã‘ã®å†™çœŸæ•™è‚²ã‚¢ãƒ—ãƒª">
  <meta name="theme-color" content="#9333ea">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="å†™çœŸæ•™å®¤">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%239333ea;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23ec4899;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='200' height='200' rx='40' fill='url(%23grad)'/%3E%3Ctext x='100' y='130' font-size='100' text-anchor='middle' fill='white'%3EğŸ“¸%3C/text%3E%3C/svg%3E">
  <title>æ„Ÿã˜ã‚‹å†™çœŸæ•™å®¤</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    /* iPadã§ã®ã‚¿ãƒƒãƒ—æ™‚ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ç„¡åŠ¹åŒ– */
    * {
      -webkit-tap-highlight-color: transparent;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState } = React;

    function PhotoClass() {
      const [step, setStep] = useState(1);
      const [theme, setTheme] = useState('');
      const [customTheme, setCustomTheme] = useState('');
      const [photos, setPhotos] = useState([]);
      const [selectedPhoto, setSelectedPhoto] = useState(null);
      const [childName, setChildName] = useState('');
      const [location, setLocation] = useState('');
      const [date, setDate] = useState('');
      const [thoughts, setThoughts] = useState('');
      const [analysis, setAnalysis] = useState(null);
      const [isAnalyzing, setIsAnalyzing] = useState(false);
      const [error, setError] = useState('');

      const sampleThemes = [
        'ğŸŒ¸ æ˜¥ã®ãŠèŠ±',
        'ğŸ± ã‹ã‚ã„ã„å‹•ç‰©',
        'ğŸŒˆ ãã‚Œã„ãªç©º',
        'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å¤§å¥½ããªå®¶æ—',
        'ğŸ± ãŠã„ã—ã„ã”ã¯ã‚“'
      ];

      const handleThemeSelect = (selectedTheme) => {
        setTheme(selectedTheme);
        setCustomTheme('');
      };

      const resizeImage = (file) => {
        return new Promise((resolve) => {
          const reader = new FileReader();
          reader.onload = (e) => {
            const img = new Image();
            img.onload = () => {
              const canvas = document.createElement('canvas');
              let width = img.width;
              let height = img.height;
              
              const MAX_SIZE = 1920;
              if (width > height && width > MAX_SIZE) {
                height = (height * MAX_SIZE) / width;
                width = MAX_SIZE;
              } else if (height > MAX_SIZE) {
                width = (width * MAX_SIZE) / height;
                height = MAX_SIZE;
              }
              
              canvas.width = width;
              canvas.height = height;
              
              const ctx = canvas.getContext('2d');
              ctx.drawImage(img, 0, 0, width, height);
              
              let quality = 0.8;
              let dataUrl = canvas.toDataURL('image/jpeg', quality);
              
              while (dataUrl.length > 4000000 && quality > 0.1) {
                quality -= 0.1;
                dataUrl = canvas.toDataURL('image/jpeg', quality);
              }
              
              resolve({
                id: Math.random().toString(36).substr(2, 9),
                data: dataUrl,
                name: file.name
              });
            };
            img.src = e.target.result;
          };
          reader.readAsDataURL(file);
        });
      };

      const handlePhotoUpload = async (e) => {
        const files = Array.from(e.target.files);
        if (files.length === 0) return;

        const photoPromises = files.map(file => resizeImage(file));
        const newPhotos = await Promise.all(photoPromises);
        setPhotos([...photos, ...newPhotos]);
      };

      const handleStep1Next = () => {
        if (!theme && !customTheme) {
          setError('ãƒ†ãƒ¼ãƒã‚’é¸ã‚“ã§ã­ï¼ğŸ“');
          return;
        }
        if (photos.length === 0) {
          setError('å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã­ï¼ğŸ“·');
          return;
        }
        setError('');
        setStep(2);
      };

      const handleStep2Next = () => {
        if (!selectedPhoto) {
          setError('ãŠæ°—ã«å…¥ã‚Šã®å†™çœŸã‚’é¸ã‚“ã§ã­ï¼â­');
          return;
        }
        if (!childName.trim()) {
          setError('ãªã¾ãˆã‚’æ•™ãˆã¦ã­ï¼âœï¸');
          return;
        }
        if (thoughts.length < 50) {
          setError('ã‹ã‚“ãã†ã‚’50æ–‡å­—ä»¥ä¸Šæ›¸ã„ã¦ã­ï¼ã‚‚ã£ã¨æ•™ãˆã¦ï¼ğŸ’­');
          return;
        }
        setError('');
        setStep(3);
        analyzePhoto();
      };

      const analyzePhoto = async () => {
        setIsAnalyzing(true);
        setError('');

        try {
          const selectedPhotoData = photos.find(p => p.id === selectedPhoto);
          const base64Data = selectedPhotoData.data.split(',')[1];
          const mimeType = selectedPhotoData.data.split(';')[0].split(':')[1];

          const prompt = `ã‚ãªãŸã¯å­ä¾›å‘ã‘ã®å„ªã—ã„å†™çœŸã®å…ˆç”Ÿã§ã™ã€‚å­ä¾›ãŒæ’®ã£ãŸå†™çœŸã¨æ„Ÿæƒ³ã‚’è¦‹ã¦ã€æ¸©ã‹ãåŠ±ã¾ã—ãªãŒã‚‰å†™çœŸã®è‰¯ã„ã¨ã“ã‚ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚

ã€æ’®å½±æƒ…å ±ã€‘
- ãƒ†ãƒ¼ãƒ: ${customTheme || theme}
- å­ä¾›ã®åå‰: ${childName}
${location ? `- æ’®å½±å ´æ‰€: ${location}` : ''}
${date ? `- æ’®å½±æ—¥: ${date}` : ''}

ã€å­ä¾›ã®æ„Ÿæƒ³ã€‘
${thoughts}

ä»¥ä¸‹ã®JSONå½¢å¼ã§è¿”ã—ã¦ãã ã•ã„ã€‚JSONã®ã¿ã‚’å‡ºåŠ›ã—ã€ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚„èª¬æ˜æ–‡ã¯ä¸€åˆ‡å«ã‚ãªã„ã§ãã ã•ã„ï¼š

{
  "greeting": "å­ä¾›ã¸ã®å„ªã—ã„æŒ¨æ‹¶ï¼ˆ30æ–‡å­—ç¨‹åº¦ï¼‰",
  "empathy": "æ„Ÿã˜ãŸã“ã¨ã¸ã®å…±æ„Ÿï¼ˆ50æ–‡å­—ç¨‹åº¦ï¼‰",
  "goodPoints": ["å†™çœŸã®è‰¯ã„ç‚¹1", "å†™çœŸã®è‰¯ã„ç‚¹2", "å†™çœŸã®è‰¯ã„ç‚¹3"],
  "matchScore": 4,
  "advice": "å„ªã—ã„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼ˆ60æ–‡å­—ç¨‹åº¦ï¼‰",
  "compositionTip": "æ§‹å›³ã®ãƒ’ãƒ³ãƒˆï¼ˆ50æ–‡å­—ç¨‹åº¦ï¼‰",
  "encouragement": "åŠ±ã¾ã—ã®è¨€è‘‰ï¼ˆ40æ–‡å­—ç¨‹åº¦ï¼‰"
}

CRITICAL: å¿…ãšæœ‰åŠ¹ãªJSONã®ã¿ã‚’è¿”ã—ã¦ãã ã•ã„ã€‚ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆ\`\`\`jsonï¼‰ã‚„ä»–ã®ãƒ†ã‚­ã‚¹ãƒˆã¯å«ã‚ãªã„ã§ãã ã•ã„ã€‚å­ä¾›ãŒç†è§£ã§ãã‚‹å„ªã—ã„è¨€è‘‰ã§ã€å…·ä½“çš„ã«è¤’ã‚ã¦ãã ã•ã„ã€‚`;

          console.log('Sending request to Claude API...');

          const response = await fetch("https://api.anthropic.com/v1/messages", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              model: "claude-sonnet-4-20250514",
              max_tokens: 2000,
              messages: [
                {
                  role: "user",
                  content: [
                    {
                      type: "image",
                      source: {
                        type: "base64",
                        media_type: mimeType,
                        data: base64Data,
                      },
                    },
                    {
                      type: "text",
                      text: prompt,
                    },
                  ],
                },
              ],
            }),
          });

          console.log('Response status:', response.status);

          if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            console.error('API Error:', errorData);
            throw new Error(`API Error: ${response.status} - ${errorData.error?.message || 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼'}`);
          }

          const data = await response.json();
          console.log('API Response:', data);

          if (!data.content || !data.content[0] || !data.content[0].text) {
            throw new Error('APIã‹ã‚‰ã®å¿œç­”ãŒä¸æ­£ã§ã™');
          }

          let responseText = data.content[0].text;
          console.log('Raw response text:', responseText);
          
          responseText = responseText.replace(/```json\n?/g, "").replace(/```\n?/g, "").trim();
          
          const jsonStart = responseText.indexOf('{');
          const jsonEnd = responseText.lastIndexOf('}');
          if (jsonStart !== -1 && jsonEnd !== -1) {
            responseText = responseText.substring(jsonStart, jsonEnd + 1);
          }
          
          console.log('Cleaned response text:', responseText);
          
          const analysisResult = JSON.parse(responseText);
          console.log('Parsed analysis result:', analysisResult);
          
          if (!analysisResult.greeting || !analysisResult.goodPoints || !Array.isArray(analysisResult.goodPoints)) {
            throw new Error('åˆ†æçµæœã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“');
          }
          
          setAnalysis(analysisResult);
        } catch (err) {
          console.error('Analysis error:', err);
          console.error('Error details:', {
            message: err.message,
            stack: err.stack
          });
          setError(`ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${err.message}\n\nã‚‚ã†ä¸€åº¦è©¦ã—ã¦ã­ï¼ğŸ”„`);
        } finally {
          setIsAnalyzing(false);
        }
      };

      const resetApp = () => {
        setStep(1);
        setTheme('');
        setCustomTheme('');
        setPhotos([]);
        setSelectedPhoto(null);
        setChildName('');
        setLocation('');
        setDate('');
        setThoughts('');
        setAnalysis(null);
        setError('');
      };

      const renderStep1 = () => (
        <div className="space-y-6">
          <div className="bg-white rounded-3xl p-6 shadow-lg">
            <h2 className="text-2xl font-bold text-purple-700 mb-4 flex items-center gap-2">
              ğŸ“¸ ãƒ†ãƒ¼ãƒã‚’ãˆã‚‰ã¼ã†ï¼
            </h2>
            <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4">
              {sampleThemes.map((t) => (
                <button
                  key={t}
                  onClick={() => handleThemeSelect(t)}
                  className={`p-4 rounded-2xl font-semibold text-lg transition-all ${
                    theme === t
                      ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg scale-105'
                      : 'bg-purple-50 text-purple-700 hover:bg-purple-100'
                  }`}
                >
                  {t}
                </button>
              ))}
            </div>
            <div className="mt-4">
              <label className="block text-purple-700 font-semibold mb-2">
                âœï¸ ã˜ã¶ã‚“ã§ãƒ†ãƒ¼ãƒã‚’æ›¸ã
              </label>
              <input
                type="text"
                value={customTheme}
                onChange={(e) => {
                  setCustomTheme(e.target.value);
                  setTheme('');
                }}
                placeholder="ä¾‹ï¼šã¼ãã®å¤§å¥½ããªå ´æ‰€"
                className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:outline-none"
              />
            </div>
          </div>

          <div className="bg-white rounded-3xl p-6 shadow-lg">
            <h2 className="text-2xl font-bold text-purple-700 mb-4 flex items-center gap-2">
              ğŸ“· å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã‚ˆã†ï¼
            </h2>
            <label className="block">
              <div className="border-4 border-dashed border-purple-300 rounded-2xl p-8 text-center cursor-pointer hover:border-purple-500 hover:bg-purple-50 transition-all">
                <div className="text-6xl mb-2">ğŸ“¤</div>
                <p className="text-purple-700 font-semibold text-lg">
                  ã“ã“ã‚’ã‚¿ãƒƒãƒ—ã—ã¦å†™çœŸã‚’ãˆã‚‰ã¼ã†ï¼
                </p>
                <p className="text-purple-500 text-sm mt-2">
                  ä½•æšã§ã‚‚OKï¼ãŸãã•ã‚“ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã­
                </p>
              </div>
              <input
                type="file"
                accept="image/*"
                multiple
                onChange={handlePhotoUpload}
                className="hidden"
              />
            </label>

            {photos.length > 0 && (
              <div className="mt-6 grid grid-cols-2 sm:grid-cols-3 gap-4">
                {photos.map((photo) => (
                  <div key={photo.id} className="relative group">
                    <img
                      src={photo.data}
                      alt={photo.name}
                      className="w-full h-32 object-cover rounded-xl shadow-md"
                    />
                    <button
                      onClick={() => setPhotos(photos.filter(p => p.id !== photo.id))}
                      className="absolute top-2 right-2 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"
                    >
                      Ã—
                    </button>
                  </div>
                ))}
              </div>
            )}
          </div>

          {error && (
            <div className="bg-red-100 border-2 border-red-300 rounded-2xl p-4 text-red-700 font-semibold">
              {error}
            </div>
          )}

          <button
            onClick={handleStep1Next}
            className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold text-xl py-4 rounded-2xl shadow-lg hover:shadow-xl transition-all hover:scale-105"
          >
            ã¤ãã¸é€²ã‚€ â†’
          </button>
        </div>
      );

      const renderStep2 = () => (
        <div className="space-y-6">
          <div className="bg-white rounded-3xl p-6 shadow-lg">
            <h2 className="text-2xl font-bold text-purple-700 mb-4 flex items-center gap-2">
              â­ ãŠæ°—ã«å…¥ã‚Šã®1æšã‚’ãˆã‚‰ã¼ã†ï¼
            </h2>
            <div className="grid grid-cols-2 sm:grid-cols-3 gap-4">
              {photos.map((photo) => (
                <button
                  key={photo.id}
                  onClick={() => setSelectedPhoto(photo.id)}
                  className={`relative rounded-xl overflow-hidden transition-all ${
                    selectedPhoto === photo.id
                      ? 'ring-4 ring-pink-500 scale-105 shadow-lg'
                      : 'hover:scale-105'
                  }`}
                >
                  <img
                    src={photo.data}
                    alt={photo.name}
                    className="w-full h-32 object-cover"
                  />
                  {selectedPhoto === photo.id && (
                    <div className="absolute inset-0 bg-pink-500 bg-opacity-30 flex items-center justify-center">
                      <span className="text-4xl">â­</span>
                    </div>
                  )}
                </button>
              ))}
            </div>
          </div>

          <div className="bg-white rounded-3xl p-6 shadow-lg space-y-4">
            <h2 className="text-2xl font-bold text-purple-700 mb-4">
              âœï¸ æ•™ãˆã¦ã­ï¼
            </h2>
            
            <div>
              <label className="block text-purple-700 font-semibold mb-2">
                ğŸ‘¤ ãªã¾ãˆ <span className="text-red-500">*</span>
              </label>
              <input
                type="text"
                value={childName}
                onChange={(e) => setChildName(e.target.value)}
                placeholder="ç”°ä¸­ å¤ªéƒ"
                className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:outline-none"
              />
            </div>

            <div>
              <label className="block text-purple-700 font-semibold mb-2">
                ğŸ“ ã©ã“ã§æ’®ã£ãŸã‹ãªï¼Ÿ
              </label>
              <input
                type="text"
                value={location}
                onChange={(e) => setLocation(e.target.value)}
                placeholder="ä¾‹ï¼šå…¬åœ’ã€å­¦æ ¡ã€ãŠã†ã¡"
                className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:outline-none"
              />
            </div>

            <div>
              <label className="block text-purple-700 font-semibold mb-2">
                ğŸ“… ã„ã¤æ’®ã£ãŸã‹ãªï¼Ÿ
              </label>
              <input
                type="date"
                value={date}
                onChange={(e) => setDate(e.target.value)}
                className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:outline-none"
              />
            </div>

            <div>
              <label className="block text-purple-700 font-semibold mb-2">
                ğŸ’­ å†™çœŸã‚’æ’®ã£ãŸæ™‚ã€ã©ã‚“ãªã“ã¨ã‚’æ„Ÿã˜ãŸã‹ãªï¼Ÿ <span className="text-red-500">*</span>
              </label>
              <textarea
                value={thoughts}
                onChange={(e) => setThoughts(e.target.value)}
                placeholder="ä¾‹ï¼šãã‚Œã„ãªãŠèŠ±ã‚’è¦‹ã¤ã‘ã¦ã€ã†ã‚Œã—ã‹ã£ãŸã§ã™ã€‚è‰²ãŒã¨ã£ã¦ã‚‚ã‚«ãƒ©ãƒ•ãƒ«ã§ã€ãã‚Œã„ã ãªã£ã¦æ€ã„ã¾ã—ãŸã€‚"
                rows="5"
                className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:outline-none resize-none"
              />
              <p className="text-sm text-purple-500 mt-1">
                {thoughts.length}/50æ–‡å­—ä»¥ä¸Šï¼ˆã„ã¾ã¯ {thoughts.length}æ–‡å­—ï¼‰
              </p>
            </div>
          </div>

          {error && (
            <div className="bg-red-100 border-2 border-red-300 rounded-2xl p-4 text-red-700 font-semibold">
              {error}
            </div>
          )}

          <div className="flex gap-3">
            <button
              onClick={() => setStep(1)}
              className="flex-1 bg-gray-300 text-gray-700 font-bold text-xl py-4 rounded-2xl shadow-lg hover:bg-gray-400 transition-all"
            >
              â† ã‚‚ã©ã‚‹
            </button>
            <button
              onClick={handleStep2Next}
              className="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold text-xl py-4 rounded-2xl shadow-lg hover:shadow-xl transition-all hover:scale-105"
            >
              åˆ†æã™ã‚‹ï¼ğŸ”
            </button>
          </div>
        </div>
      );

      const renderStep3 = () => {
        if (isAnalyzing) {
          return (
            <div className="bg-white rounded-3xl p-12 shadow-lg text-center">
              <div className="text-6xl mb-4 animate-bounce">ğŸ¤”</div>
              <h2 className="text-2xl font-bold text-purple-700 mb-2">
                å†™çœŸã‚’è¦‹ã¦ã„ã‚‹ã‚ˆ...
              </h2>
              <p className="text-purple-500">
                ã™ã“ã—ã¾ã£ã¦ã­ï¼
              </p>
            </div>
          );
        }

        if (error) {
          return (
            <div className="space-y-4">
              <div className="bg-red-100 border-2 border-red-300 rounded-2xl p-6">
                <div className="text-4xl mb-2 text-center">ğŸ˜¢</div>
                <p className="text-red-700 font-semibold text-center mb-4">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</p>
                <div className="bg-white rounded-xl p-4 text-sm text-gray-700 whitespace-pre-wrap break-words">
                  {error}
                </div>
              </div>
              <button
                onClick={() => {
                  setError('');
                  setStep(2);
                }}
                className="w-full bg-purple-500 text-white font-bold text-xl py-4 rounded-2xl shadow-lg hover:bg-purple-600 transition-all"
              >
                ã‚‚ã©ã‚‹
              </button>
            </div>
          );
        }

        if (!analysis) return null;

        const selectedPhotoData = photos.find(p => p.id === selectedPhoto);

        return (
          <div className="space-y-6">
            <div className="bg-white rounded-3xl p-6 shadow-lg">
              <h2 className="text-3xl font-bold text-purple-700 mb-4 text-center">
                ğŸ‰ åˆ†æçµæœ
              </h2>
              
              <div className="mb-6">
                <img
                  src={selectedPhotoData.data}
                  alt="Selected"
                  className="w-full max-h-64 object-contain rounded-2xl shadow-md"
                />
              </div>

              <div className="space-y-4">
                <div className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-4">
                  <h3 className="font-bold text-purple-700 text-lg mb-2">ğŸ‘‹ {analysis.greeting}</h3>
                </div>

                <div className="bg-blue-50 rounded-2xl p-4">
                  <h3 className="font-bold text-blue-700 text-lg mb-2">ğŸ’­ å…ˆç”Ÿã‚‚åŒã˜ã‚ˆã†ã«æ„Ÿã˜ãŸã‚ˆ</h3>
                  <p className="text-blue-900">{analysis.empathy}</p>
                </div>

                <div className="bg-green-50 rounded-2xl p-4">
                  <h3 className="font-bold text-green-700 text-lg mb-3">âœ¨ å†™çœŸã®ã„ã„ã¨ã“ã‚</h3>
                  <ul className="space-y-2">
                    {analysis.goodPoints.map((point, index) => (
                      <li key={index} className="flex items-start gap-2 text-green-900">
                        <span className="text-xl">â­</span>
                        <span>{point}</span>
                      </li>
                    ))}
                  </ul>
                </div>

                <div className="bg-yellow-50 rounded-2xl p-4">
                  <h3 className="font-bold text-yellow-700 text-lg mb-2">ğŸ“Š æ„Ÿæƒ³ã¨å†™çœŸã®ãƒ”ãƒƒã‚¿ãƒªåº¦</h3>
                  <div className="flex items-center gap-2">
                    {[...Array(5)].map((_, i) => (
                      <span key={i} className="text-3xl">
                        {i < analysis.matchScore ? 'â­' : 'â˜†'}
                      </span>
                    ))}
                  </div>
                </div>

                <div className="bg-purple-50 rounded-2xl p-4">
                  <h3 className="font-bold text-purple-700 text-lg mb-2">ğŸ’¡ ã‚¢ãƒ‰ãƒã‚¤ã‚¹</h3>
                  <p className="text-purple-900">{analysis.advice}</p>
                </div>

                <div className="bg-pink-50 rounded-2xl p-4">
                  <h3 className="font-bold text-pink-700 text-lg mb-2">ğŸ“ æ§‹å›³ã®ãƒ’ãƒ³ãƒˆ</h3>
                  <p className="text-pink-900">{analysis.compositionTip}</p>
                </div>

                <div className="bg-gradient-to-r from-orange-50 to-red-50 rounded-2xl p-4">
                  <h3 className="font-bold text-orange-700 text-lg mb-2">ğŸŒŸ å¿œæ´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h3>
                  <p className="text-orange-900 text-lg">{analysis.encouragement}</p>
                </div>
              </div>
            </div>

            <button
              onClick={resetApp}
              className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold text-xl py-4 rounded-2xl shadow-lg hover:shadow-xl transition-all hover:scale-105"
            >
              ã‚‚ã†ä¸€åº¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã™ã‚‹ï¼ğŸ”„
            </button>
          </div>
        );
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-purple-100 via-pink-100 to-purple-200 py-8 px-4">
          <div className="max-w-4xl mx-auto">
            <header className="text-center mb-8">
              <h1 className="text-4xl md:text-5xl font-bold text-purple-800 mb-2">
                ğŸ“¸ æ„Ÿã˜ã‚‹å†™çœŸæ•™å®¤
              </h1>
              <p className="text-purple-600 text-lg">
                ãã¿ã®å†™çœŸã‚’å…ˆç”ŸãŒè¦‹ã‚‹ã‚ˆï¼
              </p>
            </header>

            <div className="mb-6 flex justify-center gap-2">
              {[1, 2, 3].map((s) => (
                <div
                  key={s}
                  className={`w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg ${
                    step >= s
                      ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white'
                      : 'bg-white text-purple-300'
                  }`}
                >
                  {s}
                </div>
              ))}
            </div>

            <main>
              {step === 1 && renderStep1()}
              {step === 2 && renderStep2()}
              {step === 3 && renderStep3()}
            </main>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<PhotoClass />);
  </script>
</body>
</html>
